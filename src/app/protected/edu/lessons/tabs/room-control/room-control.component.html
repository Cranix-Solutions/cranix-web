<cranix-toolbar *ngIf="!eduS.selectedRoom" title="{{'Room control' | translate}}"></cranix-toolbar>
<cranix-toolbar *ngIf="eduS.selectedRoom" title="{{'Room control in' | translate}} {{eduS.selectedRoom.name}}">
</cranix-toolbar>
<ion-toolbar class="page-toolbar">
  <ion-buttons *ngIf="room" slot="start">
    <ion-button matTooltip="{{ 'To login' | translate}}" (click)="setAccess('login')" [disabled]="disableChange">
      <ion-icon [ngStyle]="{'color': room.accessInRooms.login  ? '#2dd36f' : '#eb445a'}" name="key-sharp" size="large">
      </ion-icon>
    </ion-button>
    <ion-button *ngIf="room && authS.isAllowed('education.proxy')" [disabled]="disableChange"
      matTooltip="{{ 'Filtered internet access' | translate}}" (click)="setAccess('proxy')">
      <ion-icon [ngStyle]="{'color': room.accessInRooms.proxy  ? '#2dd36f' : '#eb445a'}" name="globe-sharp"
        size="large">
      </ion-icon>
    </ion-button>
    <ion-button *ngIf="room && authS.isAllowed('room.direct')" matTooltip="{{ 'Direct internet access' | translate}}"
      (click)="setAccess('direct')" [disabled]="disableChange">
      <ion-icon [ngStyle]="{'color': room.accessInRooms.direct  ? '#2dd36f' : '#eb445a'}" name="nuclear-sharp"
        size="large">
      </ion-icon>
    </ion-button>
    <ion-button matTooltip="{{ 'Printing' | translate}}" (click)="setAccess('printing')" [disabled]="disableChange">
      <ion-icon [ngStyle]="{'color': room.accessInRooms.printing  ? '#2dd36f' : '#eb445a'}" name="print-sharp"
        size="large">
      </ion-icon>
    </ion-button>
    <ion-button fill="clear" (click)="onBTNSHARE()"
      matTooltip="{{'Post file into the Import directory of the logged on users or of the workstation users.'|translate}}">
      <ion-icon slot="end" name="cloud-upload" size="large"></ion-icon>
    </ion-button>
    <ion-button fill="clear" (click)="onBTNCOLLECT()"
      matTooltip="{{'Collect the file from the Export directory of the logged on users or of the workstation users.'|translate}}">
      <ion-icon slot="end" name="cloud-download" size="large"></ion-icon>
    </ion-button>
    <ion-button fill="clear" (click)="openAction($event)"
      matTooltip="{{'Apply an action on all devices in room'|translate}}">
      <ion-icon slot="end" name="desktop" size="large"></ion-icon>
    </ion-button>
  </ion-buttons>
  <ion-buttons slot="end">
    <ion-item lines="none" matTooltip="{{'Select the room to control' | translate}}">
      <ion-label *ngIf="!authS.isMD()">{{'Select a room' | translate}}</ion-label>
      <ionic-selectable #selectRoom item-content [(ngModel)]="eduS.selectedRoom" [ngModelOptions]="{standalone: true}"
      [items]="eduS.myRooms" itemValueField="id" itemTextField="name" [canSearch]="true" (onChange)="roomSelected()">
      <ng-template ionicSelectableHeaderTemplate>
        <ion-toolbar>
          <ion-title>
            {{ "Select a Room" | translate }}
          </ion-title>
          <ion-buttons slot="end">
            <ion-button ion-button (click)="selectRoom.close()">
              <ion-icon color="danger" name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ng-template>
      <ng-template ionicSelectableItemIconTemplate>
        <div></div>
      </ng-template>
    </ionic-selectable>
      <!-- ion-button (click)="selectRooms()" fill="clear">
        <ion-icon name="room"></ion-icon>
      </ion-button -->
    </ion-item>
    <ion-item *ngIf="!authS.isMD()" lines="none" matTooltip="{{'Select picture size' | translate}}">
      <ion-label>{{'Select picture size' | translate }}</ion-label>
      <ion-icon name="resize"></ion-icon>
      <ion-select *ngIf="eduS.selectedRoom" [(ngModel)]="gridSize" name="gridSize"
        (ionChange)="sizeChange($event)" okText="{{'apply' | translate }}" cancelText="{{ 'Cancel' | translate}}">
        <ion-select-option value="{{size}}" *ngFor="let size of gridSizes">{{size}}</ion-select-option>
      </ion-select>
    </ion-item>
  </ion-buttons>
</ion-toolbar>
<ion-item-divider></ion-item-divider>
<ion-content>
  <ion-grid *ngIf="eduS.room" cdkDropListGroup>
    <ion-row id="row-{{i}}" *ngFor="let row of eduS.rows; index as i">
      <ion-col *ngFor="let device of row; index as j" [size]="gridSize">
        <cranix-roomdev [row]="i" [place]="j" [device]="device"></cranix-roomdev>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>